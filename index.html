<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industria Nordica</title>
    <meta name="description" content="Commercium Gratia Dei - Terra Mare et Aer">
    <link rel="icon" type="image/png" href="signet.png">
    
    <meta property="og:title" content="Industria Nordica">
    <meta property="og:description" content="Commercium Gratia Dei - Terra Mare et Aer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.industrianordica.fi/">
    <meta property="og:image" content="https://www.industrianordica.fi/Signet-wa.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="700">
    <meta property="og:image:height" content="700">
    
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- PERUSTYYLIT --- */
        :root {
            --bg-dark: rgb(50, 50, 50);
            --bg-panel: rgb(40, 40, 40);
            --accent: #FFFFFF;
            --text-muted: #aaaaaa;
            --border: rgba(255,255,255,0.1);
            --highlight: #0085CA; /* Arctos Blue highlight */
        }

        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: var(--bg-dark);
            color: #FFFFFF; 
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            scroll-behavior: smooth;
            position: relative;
        }

        a { text-decoration: none; color: #FFFFFF; }
        input, button, textarea, select { font-family: 'Montserrat', sans-serif; }

        /* --- NAVIGAATIO (ABSOLUTE) --- */
        .signet-home {
            position: absolute; 
            z-index: 2200; 
            top: 20px;          
            left: 20px;           
            width: 50px;        
            height: auto;
            cursor: pointer;
            transition: transform 0.3s ease;
            display: block;
        }
        .signet-home:hover { transform: scale(1.05); }

        .hamburger-btn {
            position: absolute;
            top: 80px; 
            left: 33px; 
            width: 24px; 
            height: 20px; 
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            z-index: 2100;
            transition: opacity 0.3s ease;
        }
        .hamburger-btn span {
            display: block;
            height: 3px; 
            width: 100%;
            background-color: #000000; 
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        .hamburger-btn.open { opacity: 0; pointer-events: none; }

        .lang-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 2000;
            display: flex;
            gap: 15px;
            font-size: 13px;
            font-weight: 600;
        }
        .lang-option { color: #aaaaaa; cursor: pointer; }
        .lang-option.active, .lang-option:hover { color: #FFFFFF; text-decoration: underline; }

        /* TARJOUSKORI-IKONI */
        .cart-btn {
            display: none;
            position: absolute;
            top: 18px; 
            right: 160px; 
            z-index: 2000;
            cursor: pointer;
            align-items: center;
            gap: 5px;
            font-size: 13px;
            font-weight: 600;
            color: #ccc;
        }
        .cart-btn:hover { color: #fff; }
        .cart-count { background: #fff; color: #000; border-radius: 50%; padding: 2px 6px; font-size: 10px; font-weight: 700; }

        .top-right-badges {
            position: absolute;
            z-index: 10;
            display: flex;      
            align-items: flex-start; 
            top: 60px;      
            right: 20px;        
            gap: 15px;            
        }
        .eu-badge, .nato-badge { height: 9vw; max-height: 75px; width: auto; }

        /* --- SIVUVALIKKO --- */
        .side-menu {
            position: fixed; top: 0; left: -320px; width: 280px; height: 100%;
            background-color: var(--bg-panel); z-index: 2050;
            transition: left 0.4s ease; box-shadow: 2px 0 15px rgba(0,0,0,0.5);
            padding-top: 80px; box-sizing: border-box;
        }
        .side-menu.active { left: 0; }
        .side-menu a { display: block; padding: 20px 30px; border-bottom: 1px solid rgb(60, 60, 60); font-weight: 600; font-size: 14px; }
        .side-menu a:hover { background-color: rgb(60, 60, 60); }
        .side-menu .sub-text { display: block; font-weight: 400; font-size: 11px; color: #AAAAAA; margin-top: 5px; text-transform: uppercase; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2040; display: none; }
        .overlay.active { display: block; }

        /* --- ETUSIVU --- */
        #landing-view { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; }
        #landing-view.hidden { display: none; }
        .logo { max-width: 60%; max-height: 60%; height: auto; display: block; animation: fadeInLogo 1.2s ease-out forwards; }
        .email-address { font-weight: 600; margin-top: 20px; font-size: 18px; opacity: 0; animation: fadeInLogo 1.2s ease-out 0.4s forwards; color: #000000 !important; }
        @keyframes fadeInLogo { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .footer-left { position: absolute; bottom: 20px; left: 20px; font-size: 11px; color: #000000; z-index: 10; }
        .footer-right { position: absolute; bottom: 20px; right: 20px; text-align: right; max-width: 350px; font-size: 11px; color: #000000; z-index: 10; }

        /* --- SELECTION TOOL VIEW --- */
        #selection-view { display: none; min-height: 100vh; padding: 100px 40px 40px 40px; background-color: var(--bg-dark); }
        #selection-view.active { display: block; }
        .selection-container { max-width: 800px; margin: 0 auto; }
        .selection-title { font-size: 24px; font-weight: 700; margin-bottom: 30px; text-transform: uppercase; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        
        .selector-box { background: var(--bg-panel); padding: 30px; border-radius: 4px; box-shadow: 0 5px 20px rgba(0,0,0,0.3); border: 1px solid var(--border); }
        .selector-label { display: block; font-size: 13px; text-transform: uppercase; color: #aaa; margin-bottom: 10px; }
        .tool-selector { width: 100%; padding: 15px; background: #2b2b2b; border: 1px solid #555; color: #fff; font-size: 16px; margin-bottom: 30px; cursor: pointer; }
        
        .recommendation-card { background: rgba(0,133,202,0.1); border: 1px solid var(--highlight); padding: 25px; display: none; animation: fadeInLogo 0.5s ease; }
        .recommendation-card.visible { display: block; }
        .rec-header { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--highlight); margin-bottom: 10px; font-weight: 700; }
        .rec-product { font-size: 20px; font-weight: 700; margin-bottom: 10px; }
        .rec-reason { font-style: italic; color: #ddd; margin-bottom: 20px; line-height: 1.5; font-size: 14px; }
        .rec-holder-info { margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); }
        .rec-actions { display: flex; gap: 15px; margin-top: 20px; }
        .btn-rec { flex: 1; padding: 12px; border: none; font-weight: 700; cursor: pointer; text-transform: uppercase; font-size: 12px; }
        .btn-primary { background: #fff; color: #000; }
        .btn-secondary { background: transparent; border: 1px solid #666; color: #fff; margin-top: 10px; }
        .btn-secondary:hover { border-color: #fff; }
        .btn-outline { background: transparent; border: 1px solid #fff; color: #fff; }
        .btn-outline:hover { background: rgba(255,255,255,0.1); }

        /* --- KAUPPASIVU --- */
        #shop-view { display: none; min-height: 100vh; padding: 100px 40px 40px 40px; }
        #shop-view.active { display: flex; flex-direction: column; }
        .shop-header { margin-bottom: 40px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        .shop-title { font-size: 24px; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; }
        .shop-tagline { font-size: 14px; color: #cccccc; margin-top: 5px; font-style: italic; }
        .shop-layout { display: flex; gap: 40px; flex: 1; }
        
        /* Sidebar Filters */
        .sidebar { width: 220px; flex-shrink: 0; }
        .filter-group { margin-bottom: 30px; }
        .filter-title { font-size: 12px; font-weight: 700; text-transform: uppercase; margin-bottom: 15px; letter-spacing: 1px; border-bottom: 1px solid var(--border); padding-bottom: 5px; }
        .filter-label { display: flex; align-items: center; margin-bottom: 8px; cursor: pointer; font-size: 13px; color: #ddd; }
        .filter-label:hover { color: #fff; }
        .filter-checkbox { appearance: none; width: 14px; height: 14px; border: 1px solid #fff; margin-right: 10px; background: transparent; cursor: pointer; flex-shrink: 0; }
        .filter-checkbox:checked { background: #fff; }
        
        /* Hakupalkki */
        .search-container { margin-bottom: 30px; }
        .search-input { width: 100%; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 10px; color: #fff; border-radius: 4px; box-sizing: border-box; }
        .search-input::placeholder { color: #888; }

        /* Product Grid */
        .product-grid { flex: 1; display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; align-content: start; }
        .product-card { border: 1px solid var(--border); padding: 20px; background: rgba(255,255,255,0.02); transition: background 0.2s, transform 0.2s; cursor: pointer; position: relative; }
        .product-card:hover { background: rgba(255,255,255,0.05); transform: translateY(-2px); }
        .prod-brand { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; margin-bottom: 5px; }
        .prod-name { font-size: 16px; font-weight: 600; margin-bottom: 10px; }
        .prod-desc { font-size: 12px; color: #ccc; margin-bottom: 15px; line-height: 1.4; }
        .prod-specs { font-size: 11px; color: #aaa; list-style: none; padding: 0; }
        .prod-specs li::before { content: "- "; }
        .quick-add-btn { position: absolute; top: 15px; right: 15px; background: transparent; border: 1px solid #555; color: #fff; width: 24px; height: 24px; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 16px; transition: all 0.2s; }
        .quick-add-btn:hover { background: #fff; color: #000; border-color: #fff; }

        /* ISO Colors */
        .iso-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 5px; }
        .iso-p { background-color: #0085CA; } .iso-m { background-color: #F1C400; } .iso-k { background-color: #E60000; }
        .iso-h { background-color: #787878; } .iso-s { background-color: #8C4B30; } .iso-n { background-color: #009640; }

        .shop-footer { margin-top: 60px; padding-top: 20px; border-top: 1px solid var(--border); text-align: center; color: #888; font-size: 11px; width: 100%; }

        /* --- MODALS --- */
        .modal-overlay { display: none; position: fixed; z-index: 3000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); justify-content: center; align-items: center; }
        .modal-overlay.open { display: flex; }
        .modal-content { background-color: #2b2b2b; padding: 30px; border: 1px solid #444; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; position: relative; border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .close-modal { position: absolute; top: 15px; right: 20px; font-size: 24px; cursor: pointer; color: #888; }
        .close-modal:hover { color: #fff; }
        
        .modal-title { font-size: 20px; font-weight: 700; margin-bottom: 20px; border-bottom: 1px solid #444; padding-bottom: 10px; }
        .tech-table { width: 100%; border-collapse: collapse; margin-bottom: 20px; font-size: 13px; }
        .tech-table td { padding: 8px; border-bottom: 1px solid #333; }
        .tech-table td:first-child { color: #888; width: 40%; }
        
        .btn-action { background: #fff; color: #000; border: none; padding: 12px 20px; font-weight: 700; cursor: pointer; width: 100%; text-transform: uppercase; letter-spacing: 1px; margin-top: 10px; font-size: 12px; }
        .btn-action:hover { background: #ddd; }
        
        /* Dropdown style in modal */
        .size-selector {
            width: 100%; padding: 10px; background: #222; border: 1px solid #444; color: #fff; border-radius: 2px; margin-bottom: 20px;
        }

        /* Forms */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-size: 11px; color: #aaa; margin-bottom: 5px; text-transform: uppercase; }
        .form-group input, .form-group textarea { width: 100%; padding: 10px; background: #222; border: 1px solid #444; color: #fff; border-radius: 2px; box-sizing: border-box; }
        .cart-item { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding: 10px 0; font-size: 13px; }
        .cart-remove { color: #E60000; cursor: pointer; margin-left: 10px; }

        /* --- MOBIILI --- */
        @media (max-width: 768px) {
            #shop-view, #selection-view { padding-top: 100px; padding-left: 20px; padding-right: 20px; }
            .signet-home { width: 50px; top: 15px; left: 15px; }
            .hamburger-btn { top: 75px; left: 28px; }
            .lang-selector { top: 15px; right: 15px; }
            .cart-btn { top: 18px; right: 160px; }
            .top-right-badges { top: 50px; right: 15px; }
            .logo { margin-bottom: 20px; max-width: 80%; }
            .footer-left, .footer-right { position: static; width: auto; max-width: 90%; margin-bottom: 20px; text-align: center; }
            .footer-left { margin-top: 40px; }
            .shop-layout { flex-direction: column; }
            .sidebar { width: 100%; margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
            .rec-actions { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div class="overlay" id="navOverlay"></div>
    
    <div class="modal-overlay" id="productModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('productModal')">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <div class="modal-overlay" id="rfqModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('rfqModal')">&times;</span>
            <div class="modal-title" data-i18n="quote_basket">Quote Basket</div>
            <div id="cartItems" style="margin-bottom: 20px;"></div>
            
            <form id="rfqForm" onsubmit="sendQuote(event)">
                <div class="form-group"><label data-i18n="form_name">Name</label><input type="text" id="rfqName" required></div>
                <div class="form-group"><label data-i18n="form_email">Email</label><input type="email" id="rfqEmail" required></div>
                <div class="form-group"><label data-i18n="form_company">Company</label><input type="text" id="rfqCompany" required></div>
                <div class="form-group"><label data-i18n="form_id">Business ID (VAT)</label><input type="text" id="rfqID" required></div>
                <button type="submit" class="btn-action" data-i18n="btn_send">Send Request</button>
            </form>
        </div>
    </div>

    <div class="lang-selector">
        <span class="lang-option active" onclick="setLanguage('en')">EN</span>
        <span class="lang-option" onclick="setLanguage('es')">ES</span>
        <span class="lang-option" onclick="setLanguage('de')">DE</span>
        <span class="lang-option" onclick="setLanguage('fi')">FI</span>
    </div>

    <div class="cart-btn" onclick="openCart()">
        <span style="font-size:16px;">üõí</span> <span data-i18n="quote">Quote</span> <span class="cart-count" id="cartCount">0</span>
    </div>

    <img src="signet.png" alt="Home" class="signet-home" onclick="closeShop()">

    <div class="hamburger-btn" id="hamburgerBtn" onclick="toggleMenu()">
        <span></span><span></span><span></span>
    </div>

    <nav class="side-menu" id="sideMenu">
        <a href="#" onclick="openShop('ARCTOS')">ARCTOS<span class="sub-text" data-i18n="arctos_desc">Precision tooling</span></a>
        <a href="#" onclick="openShop('FENRIS')">FENRIS<span class="sub-text" data-i18n="fenris_desc">Aerospace & defence tooling</span></a>
        <a href="#" onclick="openShop('ALL')">ALL PRODUCTS<span class="sub-text" data-i18n="all_desc">Complete Catalog</span></a>
        <a href="#" onclick="openSelectionTool()" style="color: #0085CA;">SELECTION TOOL<span class="sub-text" data-i18n="tool_select_desc">Find the right insert</span></a>
        
        <a href="#" onclick="closeShop()" style="border-top: 1px solid rgb(60,60,60); margin-top: 20px;"><span style="font-size: 12px; color: #fff;" data-i18n="back_home">‚Üê Back to Home</span></a>
    </nav>
    
    <div id="landing-view">
        <div class="top-right-badges">
            <a href="https://www.nato.int/en" target="_blank"><img src="badge-nato.png" alt="NATO" class="nato-badge"></a>
            <a href="https://commission.europa.eu/index_en" target="_blank"><img src="badge-eu.png" alt="EU" class="eu-badge"></a>
        </div>
        <img src="logo-main.png" alt="Industria Nordica" class="logo">
        <a href="mailto:info@industrianordica.fi" class="email-address">info@industrianordica.fi</a>
        <div class="footer-left" data-i18n="copyright">Copyright ¬© 2025 INDUSTRIA NORDICA OY ALL RIGHTS RESERVED</div>
        <div class="footer-right" data-i18n="trademarks">Industria Nordica Ltd, Industria Nordica GmbH and Industria Nordica SRL are registered trademarks of Industria Nordica Oy</div>
    </div>

    <div id="selection-view">
        <div class="selection-container">
            <div class="selection-title" data-i18n="tool_selector_title">Tool Selection Guide</div>
            
            <div class="selector-box">
                <label class="selector-label" data-i18n="select_current">Select Current Tool / Insert Type</label>
                <select id="currentToolSelect" class="tool-selector" onchange="showRecommendation()">
                    <option value="" data-i18n="select_placeholder">-- Select from list --</option>
                    </select>

                <div id="recCard" class="recommendation-card">
                    <div class="rec-header" data-i18n="our_recommendation">Our Recommendation</div>
                    <div class="rec-product" id="recProductName"></div>
                    <div class="rec-reason" id="recReason"></div>
                    
                    <div id="recHolderSection" class="rec-holder-info" style="display:none;">
                        <strong style="color:#fff;" data-i18n="holder_needed">New Holder Required?</strong> <span style="color:#E60000;" data-i18n="yes">YES</span>
                        <div style="margin-top:5px; color:#aaa;">
                            <span data-i18n="recommended_holder">Recommended Holder:</span> <span id="recHolderName" style="color:#fff; font-weight:600;"></span>
                        </div>
                    </div>

                    <div class="rec-actions">
                        <button class="btn-rec btn-primary" onclick="addRecProductToCart()" data-i18n="add_product_quote">Add Product to Quote</button>
                        <button class="btn-rec btn-outline" id="btnRecHolder" onclick="addRecHolderToCart()" style="display:none;" data-i18n="add_holder_quote">Add Holder to Quote</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="shop-view">
        <div class="shop-header">
            <div id="brand-title" class="shop-title">BRAND NAME</div>
            <div id="brand-tagline" class="shop-tagline">Tagline</div>
        </div>

        <div class="shop-layout">
            <div class="sidebar">
                <div class="search-container">
                    <input type="text" id="productSearch" class="search-input" placeholder="Search products (e.g. CNMG)..." onkeyup="filterProducts()">
                </div>

                <div class="filter-group">
                    <div class="filter-title" data-i18n="filter_worktype">Worktype</div>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox sub-filter" value="sub_turning" onchange="filterProducts()"> <span data-i18n="sub_turning">Turning</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox sub-filter" value="sub_milling" onchange="filterProducts()"> <span data-i18n="sub_milling">Milling</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox sub-filter" value="sub_drilling" onchange="filterProducts()"> <span data-i18n="sub_drilling">Drilling</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox sub-filter" value="sub_threading" onchange="filterProducts()"> <span data-i18n="sub_threading">Threading</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox sub-filter" value="sub_parting" onchange="filterProducts()"> <span data-i18n="sub_parting">Parting</span></label>
                </div>

                <div class="filter-group">
                    <div class="filter-title" data-i18n="filter_tooltype">Tool Type</div>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox type-filter" value="type_insert" onchange="filterProducts()"> <span data-i18n="type_insert">Insert</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox type-filter" value="type_rotating" onchange="filterProducts()"> <span data-i18n="type_rotating">Solid / Rotating</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox type-filter" value="type_holder" onchange="filterProducts()"> <span data-i18n="type_holder">Tool Holder</span></label>
                </div>

                <div class="filter-group">
                    <div class="filter-title" data-i18n="filter_material">Material</div>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox iso-filter" value="P" onchange="filterProducts()"><span class="iso-dot iso-p"></span> <span data-i18n="iso_p">Steel</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox iso-filter" value="M" onchange="filterProducts()"><span class="iso-dot iso-m"></span> <span data-i18n="iso_m">Stainless</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox iso-filter" value="K" onchange="filterProducts()"><span class="iso-dot iso-k"></span> <span data-i18n="iso_k">Cast Iron</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox iso-filter" value="H" onchange="filterProducts()"><span class="iso-dot iso-h"></span> <span data-i18n="iso_h">Hardened</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox iso-filter" value="S" onchange="filterProducts()"><span class="iso-dot iso-s"></span> <span data-i18n="iso_s">Titanium</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox iso-filter" value="N" onchange="filterProducts()"><span class="iso-dot iso-n"></span> <span data-i18n="iso_n">Alu/Plastics</span></label>
                </div>

                <div class="filter-group">
                    <div class="filter-title" data-i18n="filter_intensity">Intensity</div>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox op-filter" value="op_heavy" onchange="filterProducts()"> <span data-i18n="op_heavy">Heavy</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox op-filter" value="op_roughing" onchange="filterProducts()"> <span data-i18n="op_roughing">Roughing</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox op-filter" value="op_medium" onchange="filterProducts()"> <span data-i18n="op_medium">Medium</span></label>
                    <label class="filter-label"><input type="checkbox" class="filter-checkbox op-filter" value="op_finishing" onchange="filterProducts()"> <span data-i18n="op_finishing">Finishing</span></label>
                </div>
            </div>
            <div class="product-grid" id="productGrid"></div>
        </div>

        <div class="shop-footer">
            <div data-i18n="copyright">Copyright ¬© 2025 INDUSTRIA NORDICA OY ALL RIGHTS RESERVED</div>
            <div data-i18n="trademarks">Industria Nordica Ltd...</div>
        </div>
    </div>

    <script>
        /* --- MAPPING DATA FOR SELECTION TOOL --- */
        const selectionData = [
            { key: 'tnmg', prodId: 2, holderId: 12, reqHolder: true }, // TNMG -> WNMG
            { key: 'cnmg_basic', prodId: 1, holderId: null, reqHolder: false }, // CNMG -> CNMG 1204
            { key: 'cnmg_hard', prodId: 21, holderId: null, reqHolder: false }, // CNMG Heavy -> CNMG 16/19
            { key: 'vnmg', prodId: 3, holderId: 36, reqHolder: true }, // VNMG -> DNMG
            { key: 'knux', prodId: 1, holderId: 11, reqHolder: true }, // KNUX -> CNMG
            { key: 'snmg', prodId: 4, holderId: null, reqHolder: false }, // SNMG -> SNMG
            { key: 'tpmt', prodId: 5, holderId: 14, reqHolder: true }, // TPMT -> CCMT
            { key: 'dcmt', prodId: 6, holderId: null, reqHolder: false }, // DCMT -> DCMT
            { key: 'dcmt_alu', prodId: 25, holderId: null, reqHolder: false }, // DCMT Alu -> VCGT
            { key: 'hard_turn', prodId: 23, holderId: 28, reqHolder: true }, // Hard -> Ceramic/CBN
            { key: 'apkt', prodId: 9, holderId: null, reqHolder: false }, // APKT -> APKT
            { key: 'r390', prodId: 9, holderId: 16, reqHolder: true }, // R390 -> APKT
            { key: 'hss_drill', prodId: 19, holderId: 31, reqHolder: true }, // HSS Drill -> 3xD
            { key: 'hss_tap', prodId: 20, holderId: null, reqHolder: false }, // HSS Tap -> PM Tap
            { key: 'tap_hard', prodId: 33, holderId: 16, reqHolder: true }, // Hard Tap -> Thread Mill
            { key: 'face_mill', prodId: 10, holderId: null, reqHolder: false }, // Face -> SEKN
            { key: 'high_feed', prodId: 22, holderId: 28, reqHolder: true } // High Feed -> RCMT
        ];

        /* --- FULL DICTIONARY --- */
        const i18n = {
            en: {
                all_desc: "Complete Catalog",
                all_tagline: "Premium Tools for Every Application",
                arctos_desc: "Precision tooling",
                fenris_desc: "Aerospace & defence tooling",
                back_home: "‚Üê Back to Home",
                copyright: "Copyright ¬© 2025 INDUSTRIA NORDICA OY ALL RIGHTS RESERVED",
                trademarks: "Industria Nordica Ltd, Industria Nordica GmbH and Industria Nordica SRL are registered trademarks of Industria Nordica Oy",
                quote: "Quote", quote_basket: "Quote Basket", form_name: "Full Name", form_email: "Email Address", form_company: "Company Name", form_id: "Business ID / VAT Number", btn_send: "Create Email Request", btn_add: "Add to Quote", btn_download: "Download Datasheet", tech_speed: "Cutting Speed (Vc)", tech_feed: "Feed (fn)", tech_depth: "Depth (ap)", tech_grade: "Grade", tech_sizes: "Available Sizes", select_size: "Select Size/Model",
                filter_worktype: "Worktype", filter_tooltype: "Tool Type", filter_material: "Material", filter_intensity: "Intensity",
                sub_turning: "Turning", sub_milling: "Milling", sub_threading: "Threading", sub_parting: "Parting", sub_drilling: "Drilling", sub_clamping: "Holders / Clamping",
                type_insert: "Insert", type_rotating: "Solid / Rotating", type_holder: "Tool Holder",
                iso_p: "Steel", iso_m: "Stainless/Duplex", iso_k: "Cast Iron", iso_h: "Hardened", iso_s: "Titanium/Super", iso_n: "Alu/Plastic",
                op_heavy: "Heavy Roughing", op_roughing: "Roughing", op_medium: "Medium", op_finishing: "Finishing",
                arctos_tagline: "The Northern Standard ‚Äì Reliable Industrial Performance",
                fenris_tagline: "Uncompromising Performance ‚Äì For Hard & Exotic Materials",
                
                // Selection Tool Translation
                tool_select_desc: "Find the right insert", tool_selector_title: "Tool Selection Guide", select_current: "Select Current Tool / Insert Type", select_placeholder: "-- Select from list --", our_recommendation: "Our Recommendation", holder_needed: "New Holder Required?", yes: "YES", recommended_holder: "Recommended Holder:", add_product_quote: "Add Product to Quote", add_holder_quote: "Add Holder to Quote",
                current_tnmg: "TNMG (Triangle, 6 edges)", reason_tnmg: "Better. 80¬∞ corner is stronger than 60¬∞. Same edges (6), better life.",
                current_cnmg_basic: "CNMG (Basic Grade)", reason_cnmg_basic: "Equivalent. Optimized price/performance general grade.",
                current_cnmg_hard: "CNMG (Heavy / Hardox)", reason_cnmg_hard: "Stronger. Reinforced geometry for armor plates.",
                current_vnmg: "VNMG (35¬∞ Diamond)", reason_vnmg: "Stronger. 55¬∞ (DNMG) won't chip as easily but fits tight spots.",
                current_knux: "KNUX (Old style)", reason_knux: "Modern. Better chip control and lower cost per edge (CNMG).",
                current_snmg: "SNMG (Basic)", reason_snmg: "Tougher. Optimized for heavy interrupted cuts (Duplex).",
                current_tpmt: "TPMT / TCMT (Internal)", reason_tpmt: "Stronger. 80¬∞ (CCMT) handles internal forces better.",
                current_dcmt: "DCMT (For Steel)", reason_dcmt: "Equivalent. Precision finishing grade.",
                current_dcmt_alu: "DCMT (Alu/Ti)", reason_dcmt_alu: "Sharper. Polished edge prevents built-up edge (VCGT).",
                current_hard_turn: "Carbide (>50HRC)", reason_hard_turn: "Faster. Enables hard turning without coolant (CBN).",
                current_apkt: "APKT 1003 / 1604", reason_apkt: "Equivalent. Industry standard 90¬∞ shoulder mill.",
                current_r390: "R390 (Sandvik Type)", reason_r390: "Value. More common standard, easier availability (APKT).",
                current_hss_drill: "HSS Twist Drill", reason_hss_drill: "Efficient. 5-10x faster and more precise (Solid Carbide).",
                current_hss_tap: "HSS Tap", reason_hss_tap: "Durable. Powder metal (PM) is tougher than basic HSS.",
                current_tap_hard: "Tap (Ti/Hard)", reason_tap_hard: "Safer. If tool breaks, part is not scrapped (Thread Mill).",
                current_face_mill: "Face Mill 45¬∞", reason_face_mill: "Equivalent. Cost effective for large flats.",
                current_high_feed: "High Feed Mill", reason_high_feed: "Efficient. Round insert (RCMT) is best for difficult materials.",

                // Descriptions
                desc_cnmg: "80¬∞ Rhombic. Reliable General Turning.", desc_wnmg: "Trigon. Economy Choice.", desc_dnmg: "55¬∞ Rhombic. Profiling.", desc_snmg: "Square. Heavy Roughing.",
                desc_apkt: "Shoulder Milling 90¬∞.", desc_4flute: "Universal End Mill.", desc_3xd: "Short Drill (3xD).", desc_cnmg_h: "Heavy Duty Hardox.", desc_vcgt: "Sharp Edge / Polished.",
                desc_ccmt: "Pos 80¬∞. Internal.", desc_dcmt: "Pos 55¬∞. Internal.", desc_16er: "Threading Inserts.", desc_mgmn: "Parting System.", desc_sekn: "Face Mill 45¬∞.", desc_tap: "Spiral Tap.", 
                desc_pclnr: "External Turning (Lever-Lock). Fits: CNMG 1204.",
                desc_mwlnr: "External Turning (Lever-Lock). Fits: WNMG 0804.",
                desc_ser: "External Threading (Screw-Lock). Fits: 16ER.",
                desc_ssclcr: "Internal Turning (Steel Shank). Fits: CCMT 09T3.",
                desc_ssducr: "Internal Profiling (Steel Shank). Fits: DCMT 11T3.",
                desc_weldon: "Weldon Chuck (DIN 69871). For End Mills.",
                desc_er: "ER Collet Chuck (DIN 69871). For ER32/40.",
                desc_dclnr: "Jet Coolant (High Pressure). Fits: CNMG.",
                desc_srdcn: "Top Clamp (Round Inserts). Fits: RCMT.",
                desc_esclcr: "Carbide Shank (Vibration Damping). Fits: CCMT.",
                desc_sir: "Internal Threading (Carbide Shank). Fits: 16IR.",
                desc_hydraulic: "Hydraulic Precision Chuck (<0.003mm).",
                desc_ext_holder: "Ext. Holders.", desc_boring: "Boring Bars.", desc_rcmt: "Round High Feed.", desc_cbn: "Ceramic/CBN.", desc_hardthread: "Hard Threading.", desc_alu: "Alu Series.", desc_troch: "Trochoidal Mill.", desc_threadmill: "Thread Mill.", desc_5xd: "Deep Drill.", desc_ncspot: "Solid Carbide 90¬∞. Centering & Chamfering. HA Shank. Uncoated."
            },
            es: {
                all_desc: "Cat√°logo Completo", all_tagline: "Herramientas premium", arctos_desc: "Herramientas de precisi√≥n", fenris_desc: "Aeroespacial", back_home: "‚Üê Volver",
                copyright: "Copyright ¬© 2025 INDUSTRIA NORDICA OY TODOS LOS DERECHOS RESERVADOS", trademarks: "Industria Nordica Ltd...", quote: "Cotizar", quote_basket: "Cesta",
                form_name: "Nombre", form_email: "Email", form_company: "Empresa", form_id: "VAT ID", btn_send: "Enviar", btn_add: "A√±adir", btn_download: "Descargar", tech_sizes: "Tama√±os", select_size: "Seleccionar tama√±o",
                filter_worktype: "Trabajo", filter_tooltype: "Tipo", filter_material: "Material", filter_intensity: "Intensidad", sub_turning: "Torneado", sub_milling: "Fresado", sub_threading: "Roscado", sub_parting: "Tronzado", sub_drilling: "Taladrado", sub_clamping: "Sujeci√≥n",
                type_insert: "Plaquita", type_rotating: "Rotativo", type_holder: "Portaherramientas", iso_p: "Acero", iso_m: "Inox", iso_k: "Fundici√≥n", iso_h: "Templado", iso_s: "Titanio", iso_n: "Alu",
                op_heavy: "Pesado", op_roughing: "Desbaste", op_medium: "Medio", op_finishing: "Acabado", arctos_tagline: "Est√°ndar N√≥rdico", fenris_tagline: "Rendimiento",
                
                // Selection Tool Translation
                tool_select_desc: "Gu√≠a de selecci√≥n", tool_selector_title: "Gu√≠a de Selecci√≥n", select_current: "Seleccionar Herramienta Actual", select_placeholder: "-- Seleccionar --", our_recommendation: "Recomendaci√≥n", holder_needed: "¬øRequiere porta?", yes: "S√ç", recommended_holder: "Porta recomendado:", add_product_quote: "A√±adir Producto", add_holder_quote: "A√±adir Porta",
                current_tnmg: "TNMG (Tri√°ngulo, 6 filos)", reason_tnmg: "Mejor. La esquina de 80¬∞ es m√°s fuerte que la de 60¬∞. Mismos filos (6), mayor vida √∫til.",
                current_cnmg_basic: "CNMG (Grado B√°sico)", reason_cnmg_basic: "Equivalente. Relaci√≥n precio/rendimiento optimizada.",
                current_cnmg_hard: "CNMG (Pesado / Hardox)", reason_cnmg_hard: "M√°s fuerte. Geometr√≠a reforzada para placas de blindaje.",
                current_vnmg: "VNMG (Diamante 35¬∞)", reason_vnmg: "M√°s fuerte. 55¬∞ (DNMG) no se astilla tan f√°cilmente.",
                current_knux: "KNUX (Estilo antiguo)", reason_knux: "Moderno. Mejor control de viruta y menor costo por filo (CNMG).",
                current_snmg: "SNMG (B√°sico)", reason_snmg: "M√°s tenaz. Optimizado para cortes interrumpidos pesados.",
                current_tpmt: "TPMT / TCMT (Interno)", reason_tpmt: "M√°s fuerte. 80¬∞ (CCMT) maneja mejor las fuerzas internas.",
                current_dcmt: "DCMT (Para Acero)", reason_dcmt: "Equivalente. Grado de acabado de precisi√≥n.",
                current_dcmt_alu: "DCMT (Alu/Ti)", reason_dcmt_alu: "M√°s afilado. El borde pulido evita el filo recrecido (VCGT).",
                current_hard_turn: "Carburo (>50HRC)", reason_hard_turn: "M√°s r√°pido. Permite torneado duro sin refrigerante (CBN).",
                current_apkt: "APKT 1003 / 1604", reason_apkt: "Equivalente. Fresa de escuadra est√°ndar de la industria.",
                current_r390: "R390 (Tipo Sandvik)", reason_r390: "Valor. Est√°ndar m√°s com√∫n, disponibilidad m√°s f√°cil (APKT).",
                current_hss_drill: "Broca HSS", reason_hss_drill: "Eficiente. 5-10 veces m√°s r√°pido y preciso (Carburo S√≥lido).",
                current_hss_tap: "Macho HSS", reason_hss_tap: "Duradero. El metal en polvo (PM) es m√°s tenaz que el HSS b√°sico.",
                current_tap_hard: "Macho (Ti/Duro)", reason_tap_hard: "M√°s seguro. Si la herramienta se rompe, la pieza no se desecha (Fresa de roscar).",
                current_face_mill: "Fresa Frontal 45¬∞", reason_face_mill: "Equivalente. Rentable para grandes superficies planas.",
                current_high_feed: "Fresa High Feed", reason_high_feed: "Eficiente. La plaquita redonda (RCMT) es mejor para materiales dif√≠ciles.",

                // Descriptions
                desc_cnmg: "R√≥mbica 80¬∞.", desc_wnmg: "Tr√≠gono.", desc_dnmg: "R√≥mbica 55¬∞.", desc_snmg: "Cuadrada.", desc_apkt: "Fresado 90¬∞.", desc_sekn: "Frontal 45¬∞.", desc_4flute: "Universal.", desc_3xd: "Broca 3xD.",
                desc_pclnr: "Torneado Ext. (Palanca). CNMG 1204.", desc_mwlnr: "Torneado Ext. (Palanca). WNMG 0804.", desc_ser: "Roscado Ext. (Tornillo). 16ER.", desc_ssclcr: "Torneado Int. (Acero). CCMT 09T3.",
                desc_ssducr: "Perfilado Int. (Acero). DCMT 11T3.", desc_weldon: "Portafresas Weldon.", desc_er: "Portapinzas ER.", desc_dclnr: "Refrigeraci√≥n Jet (Alta Presi√≥n).", desc_srdcn: "Sujeci√≥n Superior (Redonda).",
                desc_esclcr: "Barra Metal Duro (Antivibraci√≥n).", desc_sir: "Roscado Int. (Metal Duro).", desc_hydraulic: "Portaherramientas Hidr√°ulico.", desc_tap: "Macho.", desc_rcmt: "Redonda.", desc_cbn: "Cer√°mica.", desc_hardthread: "Roscado Duro.", desc_alu: "Alu.", desc_troch: "Trocoidal.", desc_threadmill: "Fresa Roscar.", desc_5xd: "Taladro Profundo.", desc_ncspot: "Metal Duro 90¬∞. Centrado y Chaflanado. Mango HA. Sin recubrimiento."
            },
            de: {
                all_desc: "Gesamtkatalog", all_tagline: "Premium-Werkzeuge", arctos_desc: "Pr√§zisionswerkzeuge", fenris_desc: "Luftfahrt", back_home: "‚Üê Zur√ºck",
                copyright: "Copyright ¬© 2025 INDUSTRIA NORDICA OY ALLE RECHTE VORBEHALTEN", trademarks: "Industria Nordica Ltd...", quote: "Angebot", quote_basket: "Korb",
                form_name: "Name", form_email: "Email", form_company: "Firma", form_id: "USt-IdNr.", btn_send: "Senden", btn_add: "Hinzuf√ºgen", btn_download: "Download", tech_sizes: "Gr√∂√üen", select_size: "Gr√∂√üe w√§hlen",
                filter_worktype: "Bearbeitung", filter_tooltype: "Typ", filter_material: "Werkstoff", filter_intensity: "Intensit√§t", sub_turning: "Drehen", sub_milling: "Fr√§sen", sub_threading: "Gewinden", sub_parting: "Abstechen", sub_drilling: "Bohren", sub_clamping: "Spannen",
                type_insert: "Wendeplatte", type_rotating: "Rotierend", type_holder: "Halter", iso_p: "Stahl", iso_m: "Rostfrei", iso_k: "Guss", iso_h: "Geh√§rtet", iso_s: "Titan", iso_n: "Alu",
                op_heavy: "Schwer", op_roughing: "Schruppen", op_medium: "Allgemein", op_finishing: "Schlichten", arctos_tagline: "Der N√∂rdliche Standard", fenris_tagline: "Leistung",
                
                // Selection Tool Translation
                tool_select_desc: "Auswahlhilfe", tool_selector_title: "Werkzeugauswahl", select_current: "Aktuelles Werkzeug w√§hlen", select_placeholder: "-- W√§hlen --", our_recommendation: "Unsere Empfehlung", holder_needed: "Neuer Halter?", yes: "JA", recommended_holder: "Empfohlener Halter:", add_product_quote: "Produkt hinzuf√ºgen", add_holder_quote: "Halter hinzuf√ºgen",
                current_tnmg: "TNMG (Dreieck, 6 Schneiden)", reason_tnmg: "Besser. 80¬∞ Ecke ist stabiler als 60¬∞. Gleiche Schneidenanzahl (6), bessere Standzeit.",
                current_cnmg_basic: "CNMG (Basis)", reason_cnmg_basic: "√Ñquivalent. Optimiertes Preis-Leistungs-Verh√§ltnis.",
                current_cnmg_hard: "CNMG (Schwer / Hardox)", reason_cnmg_hard: "St√§rker. Verst√§rkte Geometrie f√ºr Panzerplatten.",
                current_vnmg: "VNMG (35¬∞ Raute)", reason_vnmg: "St√§rker. 55¬∞ (DNMG) bricht nicht so leicht aus, passt aber in enge Bereiche.",
                current_knux: "KNUX (Alter Stil)", reason_knux: "Modern. Bessere Spankontrolle und geringere Kosten pro Schneide (CNMG).",
                current_snmg: "SNMG (Basis)", reason_snmg: "Z√§her. Optimiert f√ºr schwere unterbrochene Schnitte.",
                current_tpmt: "TPMT / TCMT (Innen)", reason_tpmt: "St√§rker. 80¬∞ (CCMT) nimmt interne Kr√§fte besser auf.",
                current_dcmt: "DCMT (F√ºr Stahl)", reason_dcmt: "√Ñquivalent. Pr√§zisions-Schlichtsorte.",
                current_dcmt_alu: "DCMT (Alu/Ti)", reason_dcmt_alu: "Sch√§rfer. Polierte Schneide verhindert Aufbauschneide (VCGT).",
                current_hard_turn: "Hartmetall (>50HRC)", reason_hard_turn: "Schneller. Erm√∂glicht Hartdrehen ohne K√ºhlmittel (CBN).",
                current_apkt: "APKT 1003 / 1604", reason_apkt: "√Ñquivalent. Industriestandard 90¬∞ Eckfr√§ser.",
                current_r390: "R390 (Sandvik-Typ)", reason_r390: "Wert. G√§ngigerer Standard, einfachere Verf√ºgbarkeit (APKT).",
                current_hss_drill: "HSS-Bohrer", reason_hss_drill: "Effizient. 5-10x schneller und pr√§ziser (Vollhartmetall).",
                current_hss_tap: "HSS-Gewindebohrer", reason_hss_tap: "Langlebig. Pulvermetall (PM) ist z√§her als einfaches HSS.",
                current_tap_hard: "Gewindebohrer (Ti/Hart)", reason_tap_hard: "Sicherer. Bei Werkzeugbruch kein Ausschuss (Gewindefr√§ser).",
                current_face_mill: "Planfr√§ser 45¬∞", reason_face_mill: "√Ñquivalent. Kosteng√ºnstig f√ºr gro√üe Fl√§chen.",
                current_high_feed: "High Feed Fr√§ser", reason_high_feed: "Effizient. Runde Wendeplatte (RCMT) ist am besten f√ºr schwierige Materialien.",

                // Descriptions
                desc_cnmg: "Rhombisch 80¬∞.", desc_wnmg: "Trigon.", desc_dnmg: "Rhombisch 55¬∞.", desc_snmg: "Quadratisch.", desc_apkt: "Eckfr√§sen.", desc_sekn: "Planfr√§sen.", desc_4flute: "Universal.", desc_3xd: "Kurzbohrer.",
                desc_pclnr: "Au√üendrehen (Hebel). CNMG 1204.", desc_mwlnr: "Au√üendrehen (Hebel). WNMG 0804.", desc_ser: "Au√üengewinde (Schraube). 16ER.", desc_ssclcr: "Innendrehen (Stahl). CCMT 09T3.",
                desc_ssducr: "Innenprofil (Stahl). DCMT 11T3.", desc_weldon: "Weldon-Futter.", desc_er: "ER-Spannzangenfutter.", desc_dclnr: "Jet-K√ºhlung (Hochdruck).", desc_srdcn: "Klemmhalter (Rund).",
                desc_esclcr: "VHM-Bohrstange (D√§mpfung).", desc_sir: "Innengewinde (VHM).", desc_hydraulic: "Hydro-Dehnspannfutter.", desc_tap: "Bohrer.", desc_rcmt: "Rund.", desc_cbn: "Keramik.", desc_hardthread: "Hartgewinden.", desc_alu: "Alu.", desc_troch: "Trochoidal.", desc_threadmill: "Gewindefr√§ser.", desc_5xd: "Tiefloch.", desc_ncspot: "Vollhartmetall 90¬∞. Zentrieren und Anfasen. HA-Schaft. Unbeschichtet."
            },
            fi: {
                all_desc: "Koko kuvasto", all_tagline: "Premium-ty√∂kalut", arctos_desc: "Tarkkuusty√∂kalut", fenris_desc: "Ilmailu", back_home: "‚Üê Etusivu",
                copyright: "Copyright ¬© 2025 INDUSTRIA NORDICA OY KAIKKI OIKEUDET PID√ÑTET√Ñ√ÑN", trademarks: "Industria Nordica Oy...", quote: "Tarjous", quote_basket: "Tarjouskori",
                form_name: "Nimi", form_email: "S√§hk√∂posti", form_company: "Yritys", form_id: "Y-tunnus", btn_send: "L√§het√§", btn_add: "Lis√§√§", btn_download: "Lataa", tech_sizes: "Koot", select_size: "Valitse koko/malli",
                filter_worktype: "Ty√∂st√∂muoto", filter_tooltype: "Tyyppi", filter_material: "Materiaali", filter_intensity: "Intensiteetti", sub_turning: "Sorvaus", sub_milling: "Jyrsint√§", sub_threading: "Kierteytys", sub_parting: "Katkaisu", sub_drilling: "Poraus", sub_clamping: "Pitimet",
                type_insert: "K√§√§nt√∂pala", type_rotating: "Py√∂riv√§", type_holder: "Pidin", iso_p: "Ter√§s", iso_m: "RST", iso_k: "Valurauta", iso_h: "Karkaistu", iso_s: "Titaani", iso_n: "Alumiini",
                op_heavy: "Raskas", op_roughing: "Rouhinta", op_medium: "Keski", op_finishing: "Viimeistely", arctos_tagline: "Pohjoinen standardi", fenris_tagline: "Tinkim√§t√∂n",
                
                // Selection Tool Translation
                tool_select_desc: "Valitse oikea ter√§", tool_selector_title: "Ter√§n valintaopas", select_current: "Valitse nykyinen ty√∂kalu / pala", select_placeholder: "-- Valitse listasta --", our_recommendation: "Meid√§n suositus", holder_needed: "Vaatiiko uuden pitimen?", yes: "KYLL√Ñ", recommended_holder: "Suositeltu pidin:", add_product_quote: "Lis√§√§ tuote tarjoukseen", add_holder_quote: "Lis√§√§ pidin tarjoukseen",
                current_tnmg: "TNMG (Kolmio, 6 s√§rm√§√§)", reason_tnmg: "Parempi. 80¬∞ k√§rkikulma on vahvempi kuin 60¬∞. Sama m√§√§r√§ s√§rmi√§ (6 kpl), parempi kesto.",
                current_cnmg_basic: "CNMG (Peruslaatu)", reason_cnmg_basic: "Vastaava. Hinta-laatusuhteeltaan optimoitu yleislaatu.",
                current_cnmg_hard: "CNMG (Raskas / Hardox)", reason_cnmg_hard: "Kest√§v√§mpi. Vahvistettu geometria ja paksumpi pala panssariter√§ksille.",
                current_vnmg: "VNMG (35¬∞ timantti)", reason_vnmg: "Vahvempi. 55¬∞ k√§rki (DNMG) ei lohkea yht√§ helposti, mutta mahtuu ahtaisiin paikkoihin.",
                current_knux: "KNUX (Vanha 'viikate')", reason_knux: "Modernimpi. Parempi lastunhallinta ja halvempi kappalehinta (CNMG).",
                current_snmg: "SNMG (Peruslaatu)", reason_snmg: "Sitke√§mpi. Optimoitu selluteollisuuden raskaalle, ep√§jatkuvalle lastulle.",
                current_tpmt: "TPMT / TCMT (Kolmio sis√§)", reason_tpmt: "Vahvempi. 80¬∞ muoto (CCMT) kest√§√§ paremmin sis√§sorvauksen rasitusta.",
                current_dcmt: "DCMT (Ter√§kselle)", reason_dcmt: "Vastaava. Tarkkuusviimeistelyyn sopiva yleislaatu.",
                current_dcmt_alu: "DCMT (Alumiini/Titaani)", reason_dcmt_alu: "Ter√§v√§mpi. Kiillotettu pinta ja ter√§v√§ s√§rm√§ est√§√§ materiaalin tarttumisen (VCGT).",
                current_hard_turn: "Kovametallipala (>50HRC)", reason_hard_turn: "Nopeampi. Mahdollistaa kovan sorvauksen ilman j√§√§hdytyst√§ (CBN).",
                current_apkt: "APKT 1003 / 1604", reason_apkt: "Vastaava. Teollisuuden yleisin 90¬∞ varsijyrsinpala.",
                current_r390: "R390 (Sandvik-tyyppi)", reason_r390: "Edullisempi. Yleisempi standardi, helpompi saatavuus (APKT).",
                current_hss_drill: "HSS-Poranter√§", reason_hss_drill: "Tehokkaampi. 5-10x nopeampi ja tarkempi kuin pikater√§s (T√§yskovametalli).",
                current_hss_tap: "HSS-Kierretappi", reason_hss_tap: "Kest√§v√§mpi. Pulveriter√§s (PM) on sitke√§mp√§√§ kuin perus HSS.",
                current_tap_hard: "Kierretappi (Titaani/Kova)", reason_tap_hard: "Turvallisempi. Jos ty√∂kalu katkeaa, kappale ei mene pilalle (Kierrejyrsin).",
                current_face_mill: "Tasojyrsin 45¬∞", reason_face_mill: "Vastaava. Kustannustehokas ratkaisu isoille tasopinnoille.",
                current_high_feed: "High Feed Jyrsin", reason_high_feed: "Tehokkaampi. Py√∂re√§ muoto (RCMT) on paras vaikeasti lastuttaville aineille.",

                // Descriptions
                desc_cnmg: "80¬∞ Rombinen.", desc_wnmg: "Trigon.", desc_dnmg: "55¬∞ Rombinen.", desc_snmg: "Neli√∂.", desc_apkt: "Varsijyrsint√§.", desc_sekn: "Tasojyrsint√§.", desc_4flute: "Yleisjyrsin.", desc_3xd: "Lyhyt pora.",
                desc_pclnr: "Ulkosorvaus (Vipu). CNMG 1204.", desc_mwlnr: "Ulkosorvaus (Vipu). WNMG 0804.", desc_ser: "Ulkokierre (Ruuvi). 16ER.", desc_ssclcr: "Sis√§sorvaus (Ter√§s). CCMT 09T3.",
                desc_ssducr: "Sis√§profiili (Ter√§s). DCMT 11T3.", desc_weldon: "Weldon-istukka.", desc_er: "ER-holkki-istukka.", desc_dclnr: "Jet-j√§√§hdytys (Korkeapaine).", desc_srdcn: "P√§√§lt√§puristus (Py√∂re√§).",
                desc_esclcr: "Kovametallivarsi (Vaimennettu).", desc_sir: "Sis√§kierre (Kovametalli).", desc_hydraulic: "Hydrauli-istukka.", desc_tap: "Kierretappi.", desc_rcmt: "Py√∂re√§.", desc_cbn: "Keramia.", desc_hardthread: "Kierteytys karkaistulle.", desc_alu: "Alu.", desc_troch: "Trookoidi.", desc_threadmill: "Kierrejyrsin.", desc_5xd: "Syv√§poraus.", desc_ncspot: "T√§yskovametalli 90¬∞. Keski√∂inti ja viiste. HA-varsi. Pinnoittamaton."
            }
        };

        // Initialize cart from localStorage if available
        let cart = JSON.parse(localStorage.getItem('industria_cart')) || [];
        let currentLang = 'en';
        let currentRecProduct = null;
        let currentRecHolder = null;

        function t(key) { return (i18n[currentLang] && i18n[currentLang][key]) ? i18n[currentLang][key] : key; }

        /* --- UPDATED DATA WITH SIZES --- */
        const products = [
            // ARCTOS - INSERTS
            { id:1, brand:'ARCTOS', name:'CNMG (80¬∞)', subtype:'sub_turning', type:'type_insert', iso:['P','M','K'], op:['op_roughing','op_medium'], desc:'desc_cnmg', vc:'220-300 m/min', fn:'0.2-0.4 mm/r', ap:'1.0-4.0 mm', sizes: ['120408', '120412'] },
            { id:2, brand:'ARCTOS', name:'WNMG (Trigon)', subtype:'sub_turning', type:'type_insert', iso:['P','M','K'], op:['op_roughing','op_medium'], desc:'desc_wnmg', vc:'200-280 m/min', fn:'0.2-0.45 mm/r', ap:'1.0-4.0 mm', sizes: ['080408', '080412'] },
            { id:3, brand:'ARCTOS', name:'DNMG (55¬∞)', subtype:'sub_turning', type:'type_insert', iso:['P','M','K'], op:['op_medium'], desc:'desc_dnmg', vc:'240-320 m/min', fn:'0.1-0.3 mm/r', ap:'0.5-3.0 mm', sizes: ['150604', '150608'] },
            { id:4, brand:'ARCTOS', name:'SNMG (Square)', subtype:'sub_turning', type:'type_insert', iso:['M','K'], op:['op_heavy'], desc:'desc_snmg', vc:'160-220 m/min', fn:'0.3-0.6 mm/r', ap:'2.0-6.0 mm', sizes: ['120412', '190616'] },
            { id:5, brand:'ARCTOS', name:'CCMT (Pos)', subtype:'sub_turning', type:'type_insert', iso:['P','M'], op:['op_finishing'], desc:'desc_ccmt', vc:'250-350 m/min', fn:'0.05-0.2 mm/r', ap:'0.2-1.5 mm', sizes: ['060204', '09T304', '09T308', '120408'] },
            { id:6, brand:'ARCTOS', name:'DCMT (Pos)', subtype:'sub_turning', type:'type_insert', iso:['P','M'], op:['op_finishing'], desc:'desc_dcmt', vc:'250-350 m/min', fn:'0.05-0.2 mm/r', ap:'0.2-1.5 mm', sizes: ['070204', '11T304'] },
            { id:7, brand:'ARCTOS', name:'16ER / 16IR', subtype:'sub_threading', type:'type_insert', iso:['P','M'], op:['op_medium'], desc:'desc_16er', vc:'120-180 m/min', fn:'Pitch dependent', ap:'-', sizes: ['ISO 1.0', 'ISO 1.5', 'ISO 2.0', 'ISO 3.0', 'NPT 11.5'] },
            { id:8, brand:'ARCTOS', name:'MGMN System', subtype:'sub_parting', type:'type_insert', iso:['P','M','K'], op:['op_medium'], desc:'desc_mgmn', vc:'140-200 m/min', fn:'0.05-0.15 mm/r', ap:'-', sizes: ['300-M', '400-M'] },
            { id:9, brand:'ARCTOS', name:'APKT 1003/1604', subtype:'sub_milling', type:'type_insert', iso:['P','M','K'], op:['op_medium'], desc:'desc_apkt', vc:'180-260 m/min', fn:'0.1-0.2 mm/z', ap:'Max 10mm', sizes: ['1003 PDTR', '1604 PDTR'] },
            { id:10, brand:'ARCTOS', name:'SEKN / SNMX', subtype:'sub_milling', type:'type_insert', iso:['P','K'], op:['op_roughing'], desc:'desc_sekn', vc:'150-220 m/min', fn:'0.2-0.35 mm/z', ap:'Max 6mm', sizes: ['1204 AFTN'] },
            
            // ARCTOS - HOLDERS
            { id:11, brand:'ARCTOS', name:'PCLNR / PCLNL', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_pclnr', vc:'-', fn:'-', ap:'-', sizes: ['2525M12'] },
            { id:12, brand:'ARCTOS', name:'MWLNR / MWLNL', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_mwlnr', vc:'-', fn:'-', ap:'-', sizes: ['2525M08'] },
            { id:13, brand:'ARCTOS', name:'SER / SEL', subtype:'sub_threading', type:'type_holder', iso:[], op:[], desc:'desc_ser', vc:'-', fn:'-', ap:'-', sizes: ['2525M16'] },
            { id:14, brand:'ARCTOS', name:'S-SCLCR (Steel)', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_ssclcr', vc:'-', fn:'-', ap:'-', sizes: ['S20R (09)', 'S25T (09)'] },
            { id:15, brand:'ARCTOS', name:'S-SDUCR (Steel)', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_ssducr', vc:'-', fn:'-', ap:'-', sizes: ['S20R (11)'] },
            { id:16, brand:'ARCTOS', name:'Weldon Chuck', subtype:'sub_milling', type:'type_holder', iso:[], op:[], desc:'desc_weldon', vc:'-', fn:'-', ap:'-', sizes: ['SK40-√ò20', 'SK50-√ò32'] },
            { id:17, brand:'ARCTOS', name:'ER Collet Chuck', subtype:'sub_milling', type:'type_holder', iso:[], op:[], desc:'desc_er', vc:'-', fn:'-', ap:'-', sizes: ['SK40-ER32', 'SK50-ER40'] },
            { id:36, brand:'ARCTOS', name:'PDJNR / PDJNL', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_pdjnr', vc:'-', fn:'-', ap:'-', sizes:['2525M15'] },

            // ARCTOS - ROTATING
            { id:18, brand:'ARCTOS', name:'4-Flute End Mill', subtype:'sub_milling', type:'type_rotating', iso:['P','M'], op:['op_medium'], desc:'desc_4flute', vc:'80-120 m/min', fn:'0.03-0.08 mm/z', ap:'1.5xD', sizes: ['√ò6', '√ò8', '√ò10', '√ò12', '√ò16', '√ò20'] },
            { id:19, brand:'ARCTOS', name:'3xD Drill', subtype:'sub_drilling', type:'type_rotating', iso:['P','M'], op:['op_medium'], desc:'desc_3xd', vc:'70-100 m/min', fn:'0.1-0.25 mm/r', ap:'3xD', sizes: ['√ò6.0', '√ò6.8', '√ò8.0', '√ò8.5', '√ò10.0', '√ò10.2', '√ò12.0'] },
            { id:20, brand:'ARCTOS', name:'Spiral Tap', subtype:'sub_threading', type:'type_rotating', iso:['P','M'], op:['op_medium'], desc:'desc_tap', vc:'10-20 m/min', fn:'-', ap:'-', sizes: ['M6', 'M8', 'M10', 'M12', 'M16'] },
            { id:35, brand:'ARCTOS', name:'NC Spotting Drill 90¬∞', subtype:'sub_drilling', type:'type_rotating', iso:['P','M','K','N'], op:['op_drilling'], desc:'desc_ncspot', vc:'80-120 m/min', fn:'0.05-0.15 mm/r', ap:'-', sizes: ['√ò10', '√ò12'] },

            // FENRIS - INSERTS
            { id:21, brand:'FENRIS', name:'CNMG 16/19', subtype:'sub_turning', type:'type_insert', iso:['H','P'], op:['op_heavy'], desc:'desc_cnmg_h', vc:'100-160 m/min', fn:'0.3-0.8 mm/r', ap:'2.0-8.0 mm', sizes: ['160612', '190616'] },
            { id:22, brand:'FENRIS', name:'RCMT / RPGT', subtype:'sub_turning', type:'type_insert', iso:['S'], op:['op_roughing'], desc:'desc_rcmt', vc:'40-70 m/min', fn:'0.1-0.3 mm/r', ap:'1.0-3.0 mm', sizes: ['10T3 MO', '1204 MO'] },
            { id:23, brand:'FENRIS', name:'Ceramic / CBN', subtype:'sub_turning', type:'type_insert', iso:['H'], op:['op_finishing'], desc:'desc_cbn', vc:'120-180 m/min', fn:'0.05-0.15 mm/r', ap:'0.1-0.5 mm', sizes: ['CNGA 120408', '16ER 1.5 CBN'] },
            { id:24, brand:'FENRIS', name:'Hard-Thread', subtype:'sub_threading', type:'type_insert', iso:['H'], op:['op_finishing'], desc:'desc_hardthread', vc:'40-60 m/min', fn:'-', ap:'-', sizes: ['16ER 1.5'] },
            { id:25, brand:'FENRIS', name:'VCGT / VBMT', subtype:'sub_turning', type:'type_insert', iso:['S','M'], op:['op_finishing'], desc:'desc_vcgt', vc:'50-90 m/min', fn:'0.05-0.15 mm/r', ap:'0.2-1.5 mm', sizes: ['160402', '160404'] },
            { id:26, brand:'FENRIS', name:'ALU-Series', subtype:'sub_turning', type:'type_insert', iso:['N'], op:['op_finishing'], desc:'desc_alu', vc:'400-800 m/min', fn:'0.1-0.4 mm/r', ap:'0.5-4.0 mm', sizes: ['VCGT 160404'] },

            // FENRIS - HOLDERS
            { id:27, brand:'FENRIS', name:'DCLNR + Jet', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_dclnr', vc:'-', fn:'-', ap:'-', sizes: ['2525 (12)'] },
            { id:28, brand:'FENRIS', name:'SRDCN (Round)', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_srdcn', vc:'-', fn:'-', ap:'-', sizes: ['2525M10'] },
            { id:29, brand:'FENRIS', name:'E-SCLCR (Carbide)', subtype:'sub_turning', type:'type_holder', iso:[], op:[], desc:'desc_esclcr', vc:'-', fn:'-', ap:'-', sizes: ['E16R (09)', 'E20S (09)'] },
            { id:30, brand:'FENRIS', name:'SIR / SIL (Carbide)', subtype:'sub_threading', type:'type_holder', iso:[], op:[], desc:'desc_sir', vc:'-', fn:'-', ap:'-', sizes: ['E16R-SIR-16'] },
            { id:31, brand:'FENRIS', name:'Hydraulic Chuck', subtype:'sub_milling', type:'type_holder', iso:[], op:[], desc:'desc_hydraulic', vc:'-', fn:'-', ap:'-', sizes: ['SK40'] },

            // FENRIS - ROTATING
            { id:32, brand:'FENRIS', name:'Trochoidal Mill', subtype:'sub_milling', type:'type_rotating', iso:['S','M'], op:['op_roughing'], desc:'desc_troch', vc:'80-140 m/min', fn:'High Feed', ap:'2xD', sizes: ['√ò10', '√ò12'] },
            { id:33, brand:'FENRIS', name:'Thread Mill', subtype:'sub_threading', type:'type_rotating', iso:['S','M','H'], op:['op_medium'], desc:'desc_threadmill', vc:'60-100 m/min', fn:'0.02-0.05 mm/z', ap:'-', sizes: ['M10'] },
            { id:34, brand:'FENRIS', name:'5xD & 8xD Drill', subtype:'sub_drilling', type:'type_rotating', iso:['P','M','K','S','H','N'], op:['op_medium'], desc:'desc_5xd', vc:'60-90 m/min', fn:'0.1-0.2 mm/r', ap:'8xD', sizes: ['√ò6.0', '√ò8.0', '√ò10.0'] }
        ];

        /* --- LOGIC --- */
        const landingView = document.getElementById('landing-view');
        const shopView = document.getElementById('shop-view');
        const selectionView = document.getElementById('selection-view');
        const productGrid = document.getElementById('productGrid');
        const brandTitle = document.getElementById('brand-title');
        const brandTagline = document.getElementById('brand-tagline');
        const sideMenu = document.getElementById('sideMenu');
        const navOverlay = document.getElementById('navOverlay');
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const productModal = document.getElementById('productModal');
        const rfqModal = document.getElementById('rfqModal');
        const modalContent = document.getElementById('modalContent');
        const cartItemsDiv = document.getElementById('cartItems');
        const cartCount = document.getElementById('cartCount');
        const cartBtn = document.querySelector('.cart-btn');
        const toolSelect = document.getElementById('currentToolSelect');

        let currentBrand = 'ALL';

        function toggleMenu() {
            sideMenu.classList.toggle('active');
            navOverlay.classList.toggle('active');
            hamburgerBtn.classList.toggle('open');
        }
        navOverlay.addEventListener('click', toggleMenu);

        function openShop(brand) {
            currentBrand = brand;
            landingView.classList.add('hidden');
            selectionView.classList.remove('active');
            shopView.classList.add('active');
            cartBtn.style.display = 'flex';
            document.querySelectorAll('input[type=checkbox]').forEach(cb => cb.checked = false);
            updateBrandHeader();
            filterProducts();
            toggleMenu(); 
        }

        function openSelectionTool() {
            landingView.classList.add('hidden');
            shopView.classList.remove('active');
            selectionView.classList.add('active');
            cartBtn.style.display = 'flex';
            populateToolSelect();
            toggleMenu();
        }

        function closeShop() {
            shopView.classList.remove('active');
            selectionView.classList.remove('active');
            landingView.classList.remove('hidden');
            cartBtn.style.display = 'none';
            if (sideMenu.classList.contains('active')) toggleMenu();
        }

        function updateBrandHeader() {
            if (currentBrand === 'ALL') { brandTitle.innerText = "INDUSTRIA NORDICA"; brandTagline.innerText = t('all_tagline'); }
            else if (currentBrand === 'ARCTOS') { brandTitle.innerText = "ARCTOS Precision Tooling"; brandTagline.innerText = t('arctos_tagline'); }
            else { brandTitle.innerText = "FENRIS Aerospace & Defence"; brandTagline.innerText = t('fenris_tagline'); }
        }

        /* --- SELECTION TOOL LOGIC --- */
        function populateToolSelect() {
            toolSelect.innerHTML = `<option value="">${t('select_placeholder')}</option>`;
            selectionData.forEach(item => {
                toolSelect.innerHTML += `<option value="${item.key}">${t('current_' + item.key)}</option>`;
            });
        }

        function showRecommendation() {
            const key = toolSelect.value;
            const card = document.getElementById('recCard');
            if(!key) { card.classList.remove('visible'); return; }

            const data = selectionData.find(d => d.key === key);
            currentRecProduct = products.find(p => p.id === data.prodId);
            currentRecHolder = data.holderId ? products.find(p => p.id === data.holderId) : null;

            if (currentRecProduct) {
                document.getElementById('recProductName').innerText = `${currentRecProduct.brand} ${currentRecProduct.name}`;
                document.getElementById('recReason').innerText = t('reason_' + key);
                
                const holderSec = document.getElementById('recHolderSection');
                const btnHolder = document.getElementById('btnRecHolder');
                
                if (data.reqHolder && currentRecHolder) {
                    holderSec.style.display = 'block';
                    document.getElementById('recHolderName').innerText = `${currentRecHolder.brand} ${currentRecHolder.name}`;
                    btnHolder.style.display = 'block';
                } else {
                    holderSec.style.display = 'none';
                    btnHolder.style.display = 'none';
                }
                card.classList.add('visible');
            }
        }

        function addRecProductToCart() {
            if(currentRecProduct) openProductDetails(currentRecProduct);
        }

        function addRecHolderToCart() {
            if(currentRecHolder) openProductDetails(currentRecHolder);
        }

        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const subtypes = Array.from(document.querySelectorAll('.sub-filter:checked')).map(cb => cb.value);
            const types = Array.from(document.querySelectorAll('.type-filter:checked')).map(cb => cb.value);
            const isos = Array.from(document.querySelectorAll('.iso-filter:checked')).map(cb => cb.value);
            const ops = Array.from(document.querySelectorAll('.op-filter:checked')).map(cb => cb.value);

            const forceFenris = (currentBrand === 'ARCTOS') && (isos.includes('H') || isos.includes('S') || isos.includes('N'));

            productGrid.innerHTML = '';
            
            const filtered = products.filter(p => {
                let match = true;
                if (currentBrand !== 'ALL') {
                    if (forceFenris) { if (p.brand !== 'FENRIS') match = false; }
                    else { if (p.brand !== currentBrand) match = false; }
                }
                if (searchTerm && !p.name.toLowerCase().includes(searchTerm) && !t(p.desc).toLowerCase().includes(searchTerm)) match = false;
                if (subtypes.length && !subtypes.includes(p.subtype)) match = false;
                if (types.length && !types.includes(p.type)) match = false;
                if (isos.length) {
                    if (!p.iso.length) { if(!types.includes('type_holder')) match = false; }
                    else if (!p.iso.some(c => isos.includes(c))) match = false;
                }
                if (isos.length > 0 && p.iso.length === 0) match = false;

                if (ops.length && (!p.op || !p.op.some(o => ops.includes(o)))) match = false;
                return match;
            });

            if (!filtered.length) { productGrid.innerHTML = '<div style="color:#888; grid-column:1/-1;">No products found.</div>'; return; }

            filtered.forEach(p => {
                let isoDots = p.iso.map(c => `<span class="iso-dot iso-${c.toLowerCase()}"></span>`).join('');
                const card = document.createElement('div');
                card.className = 'product-card';
                card.onclick = (e) => { 
                    if(e.target.classList.contains('quick-add-btn')) return;
                    openProductDetails(p); 
                };
                
                card.innerHTML = `
                    <div class="quick-add-btn" onclick="quickAdd(${p.id}); event.stopPropagation();">+</div>
                    <div class="prod-brand">${p.brand}</div>
                    <div class="prod-name">${p.name}</div>
                    <div class="prod-desc">${t(p.desc)}</div>
                    <ul class="prod-specs"><li>${t(p.subtype)} / ${t(p.type)}</li></ul>
                    <div style="margin-top:10px;">${isoDots}</div>
                `;
                productGrid.appendChild(card);
            });
        }

        /* --- MODAL LOGIC (UPDATED) --- */
        function openProductDetails(p) {
            let sizesHtml = '';
            if (p.sizes && p.sizes.length > 0) {
                let options = p.sizes.map(s => `<option value="${s}">${s}</option>`).join('');
                sizesHtml = `
                    <div style="margin-bottom:15px;">
                        <label style="font-size:11px; text-transform:uppercase; color:#aaa; display:block; margin-bottom:5px;">${t('select_size')}:</label>
                        <select id="selectedSize" class="size-selector">
                            ${options}
                        </select>
                    </div>
                `;
            }

            modalContent.innerHTML = `
                <div class="modal-title">${p.name}</div>
                <div style="margin-bottom:15px; color:#ccc;">${t(p.desc)}</div>
                ${sizesHtml}
                <table class="tech-table">
                    <tr><td>${t('tech_speed')}</td><td>${p.vc}</td></tr>
                    <tr><td>${t('tech_feed')}</td><td>${p.fn}</td></tr>
                    <tr><td>${t('tech_depth')}</td><td>${p.ap}</td></tr>
                    <tr><td>ISO</td><td>${p.iso.join(', ')}</td></tr>
                </table>
                <button class="btn-action" onclick="addFromModal(${p.id})">${t('btn_add')}</button>
                <button class="btn-action btn-secondary">${t('btn_download')}</button>
            `;
            productModal.classList.add('open');
        }

        function closeModal(id) { document.getElementById(id).classList.remove('open'); }

        /* --- CART LOGIC (WITH LOCALSTORAGE) --- */
        function saveCart() {
            localStorage.setItem('industria_cart', JSON.stringify(cart));
            updateCartUI();
        }

        function addFromModal(id) {
            const select = document.getElementById('selectedSize');
            const size = select ? select.value : ''; 
            addToCart(id, size);
            closeModal('productModal');
        }

        function quickAdd(id) {
            const p = products.find(x => x.id === id);
            if (p.sizes && p.sizes.length > 0) {
                openProductDetails(p);
            } else {
                addToCart(id, '');
            }
        }

        function addToCart(id, size) {
            const p = products.find(x => x.id === id);
            cart.push({ ...p, selectedSize: size });
            saveCart();
            const btn = document.querySelector('.cart-btn');
            btn.style.color = "#fff"; setTimeout(()=> btn.style.color="#ccc", 300);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
        }

        function updateCartUI() {
            cartCount.innerText = cart.length;
            cartItemsDiv.innerHTML = '';
            cart.forEach((p, i) => {
                const sizeStr = p.selectedSize ? ` (${p.selectedSize})` : '';
                cartItemsDiv.innerHTML += `
                    <div class="cart-item">
                        <span>${p.brand} ${p.name}${sizeStr}</span>
                        <span class="cart-remove" onclick="removeFromCart(${i})">X</span>
                    </div>`;
            });
        }

        function openCart() {
            updateCartUI();
            rfqModal.classList.add('open');
        }

        function sendQuote(e) {
            e.preventDefault();
            if(!cart.length) { alert("Cart is empty"); return; }
            
            const name = document.getElementById('rfqName').value;
            const email = document.getElementById('rfqEmail').value;
            const company = document.getElementById('rfqCompany').value;
            const bid = document.getElementById('rfqID').value;
            
            let body = `REQUEST FOR QUOTE\n\nContact:\nName: ${name}\nEmail: ${email}\nCompany: ${company}\nBusiness ID: ${bid}\n\nProducts:\n`;
            cart.forEach(p => {
                const sizeStr = p.selectedSize ? ` [Size: ${p.selectedSize}]` : '';
                body += `- ${p.brand} ${p.name}${sizeStr}\n`;
            });
            
            window.location.href = `mailto:info@industrianordica.fi?subject=RFQ from ${company}&body=${encodeURIComponent(body)}`;
            closeModal('rfqModal');
        }

        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-i18n]').forEach(el => el.textContent = t(el.getAttribute('data-i18n')));
            document.querySelectorAll('.lang-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.textContent.toLowerCase() === lang) opt.classList.add('active');
            });
            if (shopView.classList.contains('active')) { updateBrandHeader(); filterProducts(); }
            if (selectionView.classList.contains('active')) { populateToolSelect(); showRecommendation(); }
        }
        
        // Init
        setLanguage('en');
        updateCartUI();
    </script>
</body>
</html>
